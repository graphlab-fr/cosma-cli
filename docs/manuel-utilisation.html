<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR" xml:lang="fr-FR" >

<head>
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="description" content="Aide à l’utilisation et à la configuration de Cosma" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<meta name="author" content="Guillaume Brioudes https://myllaume.fr/" />
<meta name="author" content="Arthur Perret https://www.arthurperret.fr/" />
<meta name="dcterms.date" content="2021-05-25" />
<title>Manuel d’utilisation de Cosma</title>

<link rel="stylesheet" href="style.css" />

</head>

<body>


<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#presentation"><span class="toc-section-number">1</span> Présentation</a>
<ul>
<li><a href="#interoperabilite"><span class="toc-section-number">1.1</span> Interopérabilité</a></li>
<li><a href="#portabilite"><span class="toc-section-number">1.2</span> Portabilité</a></li>
<li><a href="#modularite"><span class="toc-section-number">1.3</span> Modularité</a></li>
</ul></li>
<li><a href="#vocabulaire"><span class="toc-section-number">2</span> Vocabulaire</a></li>
<li><a href="#installation"><span class="toc-section-number">3</span> Installation</a>
<ul>
<li><a href="#pre-requis"><span class="toc-section-number">3.1</span> Pré-requis</a></li>
<li><a href="#telechargement"><span class="toc-section-number">3.2</span> Téléchargement</a></li>
<li><a href="#mise-en-route"><span class="toc-section-number">3.3</span> Mise en route</a></li>
</ul></li>
<li><a href="#configuration"><span class="toc-section-number">4</span> Configuration</a>
<ul>
<li><a href="#parametres-necessaires"><span class="toc-section-number">4.1</span> Paramètres nécessaires</a>
<ul>
<li><a href="#parametres-du-graphe"><span class="toc-section-number">4.1.1</span> Paramètres du graphe</a></li>
</ul></li>
<li><a href="#parametres-facultatifs"><span class="toc-section-number">4.2</span> Paramètres facultatifs</a></li>
<li><a href="#exemples-de-configuration"><span class="toc-section-number">4.3</span> Exemples de configuration</a></li>
<li><a href="#commandes"><span class="toc-section-number">4.4</span> Commandes</a></li>
</ul></li>
<li><a href="#utilisation-du-cosmographe"><span class="toc-section-number">5</span> Utilisation du cosmographe</a>
<ul>
<li><a href="#creer-des-fiches"><span class="toc-section-number">5.1</span> Créer des fiches</a></li>
<li><a href="#creer-des-liens"><span class="toc-section-number">5.2</span> Créer des liens</a></li>
<li><a href="#export"><span class="toc-section-number">5.3</span> Export</a></li>
<li><a href="#historique"><span class="toc-section-number">5.4</span> Historique</a></li>
</ul></li>
<li><a href="#utilisation-du-cosmoscope"><span class="toc-section-number">6</span> Utilisation du cosmoscope</a>
<ul>
<li><a href="#interface"><span class="toc-section-number">6.1</span> Interface</a>
<ul>
<li><a href="#css-personnalise"><span class="toc-section-number">6.1.1</span> CSS personnalisé</a></li>
</ul></li>
<li><a href="#menu-lateral-gauche"><span class="toc-section-number">6.2</span> Menu latéral gauche</a>
<ul>
<li><a href="#moteur-de-recherche"><span class="toc-section-number">6.2.1</span> Moteur de recherche</a></li>
<li><a href="#filtres"><span class="toc-section-number">6.2.2</span> Filtres</a></li>
<li><a href="#mots-cles"><span class="toc-section-number">6.2.3</span> Mots-clés</a></li>
<li><a href="#index"><span class="toc-section-number">6.2.4</span> Index</a></li>
<li><a href="#vues"><span class="toc-section-number">6.2.5</span> Vues</a></li>
<li><a href="#parametres-du-graphe-1"><span class="toc-section-number">6.2.6</span> Paramètres du graphe</a></li>
</ul></li>
<li><a href="#graphe"><span class="toc-section-number">6.3</span> Graphe</a>
<ul>
<li><a href="#navigation"><span class="toc-section-number">6.3.1</span> Navigation</a></li>
<li><a href="#spacialisation"><span class="toc-section-number">6.3.2</span> Spacialisation</a></li>
<li><a href="#focus"><span class="toc-section-number">6.3.3</span> Focus</a></li>
</ul></li>
<li><a href="#fiches"><span class="toc-section-number">6.4</span> Fiches</a>
<ul>
<li><a href="#liens"><span class="toc-section-number">6.4.1</span> Liens</a></li>
</ul></li>
</ul></li>
<li><a href="#credits"><span class="toc-section-number">7</span> Crédits</a>
<ul>
<li><a href="#equipe"><span class="toc-section-number">7.1</span> Équipe</a></li>
<li><a href="#bibliotheques-utilisees"><span class="toc-section-number">7.2</span> Bibliothèques utilisées</a></li>
<li><a href="#historique-du-projet"><span class="toc-section-number">7.3</span> Historique du projet</a></li>
</ul></li>
</ul>
</nav>

<main>
<article>
<h1 class="title">Manuel d’utilisation de Cosma</h1>
<p>Cosma est un logiciel de visualisation de graphe documentaire. Il permet de représenter des notes interreliées sous la forme d’un réseau interactif dans une interface web. Le logiciel est conçu pour fonctionner avec des fichiers texte en Markdown et s’adapte aussi bien à une petite collection (centaine de documents) qu’à une vaste documentation (jusqu’à plusieurs milliers de documents). Il permet de produire différents types de documents : carnets de notes, Zettelkasten, wikis.</p>
<p>Cosma est développé dans le cadre du programme de recherche ANR <a href="https://hyperotlet.hypotheses.org/">HyperOtlet</a>.</p>
<p>Bienvenue sur le manuel d’utilisation de Cosma. C’est le guide complet pour exploiter tout le potentiel de l’interface de Cosma. Les personnes souhaitant modifier cette interface et le fonctionnement du logiciel seront également interessées par la <a href="#">documentation de développement</a>.</p>
<div class="sommaire">
<ol>
<li><a href="#presentation">Présentation</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#utilisation-du-cosmographe">Utilisation du cosmographe</a></li>
<li><a href="#utilisation-du-cosmoscope">Utilisation du cosmoscope</a></li>
<li><a href="#credits">Crédits</a></li>
</ol>
</div>
<h1 data-number="1" id="presentation"><span class="header-section-number">1</span> Présentation</h1>
<p>Le logiciel repose sur trois principes : l’interopérabilité, la portabilité et la modularité.</p>
<h2 data-number="1.1" id="interoperabilite"><span class="header-section-number">1.1</span> Interopérabilité</h2>
<p>Cosma fonctionne avec un répertoire de fichiers au format texte. Vous gardez le contrôle total de cet espace. Les logiciels s’envolent mais les données restent. Utiliser ou désinstaller Cosma n’altérera pas vos fichiers. Ils restent à la disposition de votre explorateur, d’autres outils de gestion de fichiers (synchronisation <em>cloud</em>, versionnement Git) et d’édition de texte.</p>
<p>Installez Cosma, indiquez-lui où sont vos fichiers et continuez à travailler avec votre éditeur de texte favori. Cosma ne prescrit pas de logiciel d’écriture, mais son fonctionnement repose sur l’adoption simultanée de plusieurs normes d’écriture qui visent à accroître l’interopérabilité et la pérennité des données :</p>
<ul>
<li>YAML pour la configuration du logiciel et les métadonnées des fichiers ;</li>
<li>Markdown pour le contenu des fichiers ;</li>
<li>une syntaxe de type wiki (doubles crochets <code>[[ ]]</code>) pour créer des liens internes ;</li>
<li>des identifiants uniques qui servent de cibles aux liens internes.</li>
</ul>
<p>Cet ensemble de normes correspond à l’intersection de plusieurs cultures textuelles : documentation, wikis, prise de notes avec la méthode Zettelkasten ou encore écriture académique avec Pandoc. Les environnements d’écriture qui partagent cette approche fonctionnent particulièrement bien en tandem avec Cosma.</p>
<p>Exemples :</p>
<ul>
<li>l’éditeur Markdown <a href="https://zettlr.com">Zettlr</a> ;</li>
<li>l’extension <a href="https://foambubble.github.io/foam/">Foam</a> pour les éditeurs Visual Studio Code et VSCodium.</li>
</ul>
<h2 data-number="1.2" id="portabilite"><span class="header-section-number">1.2</span> Portabilité</h2>
<p>Cosma se divise en deux parties :</p>
<ul>
<li>le <strong>cosmographe</strong>, une interface de fabrication ;</li>
<li>le <strong>cosmoscope</strong>, une interface de visualisation embarqué.</li>
</ul>
<p>Le <strong>cosmographe</strong> est un logiciel basé sur NodeJS qui inclut deux fonctionnalités principales. La première consiste à faciliter la création de documents aux normes de Cosma via un formulaire. La seconde consiste à lire un répertoire de documents, le modéliser sous la forme de données au format JSON, et générer un <strong>cosmoscope</strong> à partir de ces données et d’outils intégrés.</p>
<!-- Capture d'écran -->
<p>Le <strong>cosmoscope</strong> est un fichier HTML à ouvrir avec un navigateur web. Il contient une visualisation interactive (sous forme de graphe) du répertoire de documents analysé par le <strong>cosmographe</strong>. Il propose de nombreuses fonctionnalités autour de cette visualisation : index, moteur de recherche, filtres d’affichage, enregistrement de vues, paramétrage de l’algorithme de dessin, affichage des documents avec liste des liens et rétroliens, etc.</p>
<!-- Capture d'écran -->
<p>Ce fichier HTML se suffit à lui-même : il contient à la fois les données et les outils, sans dépendance à d’autres logiciels. Par conséquent, vous pouvez partager un cosmoscope aussi facilement que n’importe quelle pièce jointe, l’utiliser hors connexion ou encore le déposer sur un serveur web pour le rendre public. Cosma stocke une copie de chaque cosmoscope généré dans un répertoire sur votre machine pour dresser un historique de vos exports.</p>
<h2 data-number="1.3" id="modularite"><span class="header-section-number">1.3</span> Modularité</h2>
<p>Le <strong>cosmoscope</strong> contient l’ensemble des données issues du processus de modélisation. Il s’agit de la liste des fichiers qu’il a analysé, mais aussi toutes les relations qu’il a pu analyser. Ces données sont à votre disposition pour que vous puissiez les réutiliser.</p>
<p>Séparer le traitement des données (cosmographe) de leur modélisation (cosmoscope) comme nous vous le proposons vous permet de créer votre propre visualisation à partir des données générées, mais aussi en modifiant le logiciel. Les code source a été intégré et <a href="#">documenté</a> à cette fin.</p>
<h1 data-number="2" id="vocabulaire"><span class="header-section-number">2</span> Vocabulaire</h1>
<ul>
<li>“<strong>fiche</strong>” : rendu d’un fichier Markdown intégré à Cosma.</li>
<li>“<strong>étiquette</strong>” : titre de la fiche placé sous le nœud correspondant.</li>
<li>“<strong>focus</strong>” : limitation de la vue autour d’un nœud pour n’afficher que les nœuds envrionnants, à <a href="#focus">différentes échelles</a>.</li>
<li>“<strong>vue</strong>” : configuration d’affichage du graphe, en fonction des filtres et du focus.</li>
</ul>
<h1 data-number="3" id="installation"><span class="header-section-number">3</span> Installation</h1>
<h2 data-number="3.1" id="pre-requis"><span class="header-section-number">3.1</span> Pré-requis</h2>
<p>Installer <a href="https://nodejs.org/fr/download/">NodeJS</a> version 12 ou supérieure.</p>
<p>Le cosmoscope ne peut être utilisé avec le navigateur web Internet Explorer. Vous pouvez utiliser les navigateurs web suivants, avec une version supérieure ou égale à celle qui est indiquée :</p>
<ul>
<li>Chrome (v.69)</li>
<li>Edge (v.79)</li>
<li>Firefox (v.62)</li>
<li>Opera (v.56)</li>
<li>Safari (v.12)</li>
</ul>
<h2 data-number="3.2" id="telechargement"><span class="header-section-number">3.2</span> Téléchargement</h2>
<p>Télécharger le dépôt git de Cosma en saisissant les commandes ci-dessous dans un terminal, ou en cliquant sur le lien suivant : <a href="https://github.com/hyperotlet/cosma/archive/master.zip" class="uri">https://github.com/hyperotlet/cosma/archive/master.zip</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">git</span> clone https://github.com/hyperotlet/cosma.git</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="bu">cd</span> cosma</span></code></pre></div>
<h2 data-number="3.3" id="mise-en-route"><span class="header-section-number">3.3</span> Mise en route</h2>
<p>Installez les dépendances nécessaires au bon fonctionnement de l’application avec la commande suivante. Le gestionnaire de dépendances NPM est installé en même temps que NodeJs.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="ex">npm</span> install --only=production</span></code></pre></div>
<h1 data-number="4" id="configuration"><span class="header-section-number">4</span> Configuration</h1>
<p>Le fichier de configuration est une liste de paramètres avec pour chacun une valeur ou une liste de sous-paramètres à renseigner. Le fichier tel qu’il est généré est un modèle des paramètres qui doivent obligatoirement être renseignées pour une configuration valide.</p>
<p>Exécutez la commande suivante pour créer le fichier de configuration (<code>config.yml</code>) s’il n’existe pas déjà. Vous pouvez aussi le supprimer et utiliser cette commande pour réinitialiser le fichier.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="ex">node</span> app</span></code></pre></div>
<p>Le fichier de configuration est au <a href="https://sweetohm.net/article/introduction-yaml.html">format YAML</a>. La hiérarchie des paramètres est mise en œuvre par l’indentation, c’est-à-dire la présence d’espaces en début de ligne. L’utilisation de tabulations dans l’indentation est interdite en YAML. Pour l’unité d’indentation, il est conseillé de choisir un multiple de 2 (2 ou 4) et de s’y tenir pour tout le fichier.</p>
<h2 data-number="4.1" id="parametres-necessaires"><span class="header-section-number">4.1</span> Paramètres nécessaires</h2>
<p>La configuration doit contenir les paramètres suivants.</p>
<dl>
<dt><code>files_origin</code> Chemin du répertoire contenant les fichiers Mardown à scanner.</dt>
<dd>Exemples : <code>./fiches/'</code>, <code>D:\repertoire\</code>
</dd>
<dd>Attention à terminer la chaîne par un slash ou un anti-slash.
</dd>
<dt><code>export_target</code> Chemin vers le répertoire d’export du cosmoscope.</dt>
<dd>Exemple : <code>./'</code>, <code>D:\repertoire\</code>
</dd>
<dd>Attention à terminer la chaîne par un slash ou un anti-slash.
</dd>
<dt><code>record_types</code> Listes des types de fiches. Ils apparaissent dans la barre latérale de gauche.</dt>
<dd>Ils colorent les nœuds dans le graphe et permettent de les filtrer.
</dd>
<dd>Vous devez impérativement renseigner le type <code>undefined</code>.
</dd>
<dd><p>Exemple</p>
<pre><code>record_types:
  undefined: &#39;#546de5&#39;
  très important: red
  fiche de lecture: &#39;rgba(157, 62, 12, 0.7)&#39;
  concepts: &#39;hsl(14, 100%, 80%)&#39;</code></pre>
</dd>
<dt><code>link_types</code> Listes des types de relations.</dt>
<dd>Ils modifient l’apparence des liens dans le graphe.
</dd>
<dd>Vous devez impérativement renseigner le type <code>undefined</code>.
</dd>
<dd>La couleur est spécifiée grâce au paramètre <code>color</code> tandis que la forme de la ligne dépend du paramètre <code>stroke</code> : La ligne peut être simple (<code>simple</code>), constituée de tirets (<code>dash</code>), pointillés (<code>dotted</code>) ou bien doublés (<code>double</code>).
</dd>
<dd><p>Exemple</p>
<pre><code>link_types:
  undefined:
    stroke: simple
    color: grey
  s:
    stroke: dash
    color: &#39;rgba(157, 62, 12, 0.7)&#39;</code></pre>
</dd>
</dl>
<h3 data-number="4.1.1" id="parametres-du-graphe"><span class="header-section-number">4.1.1</span> Paramètres du graphe</h3>
<p>Les paramètres suivants peuvent être modifiés</p>
<ul>
<li>depuis le fichier de configuration. Les options sont indentées sous le paramètre <code>graph_config</code> comme dans l’exemple ci-dessous.</li>
<li>de manière éphémère, depuis le volet “Paramètres de graphe” du menu ; les paramètres inscrits dans la configuration les remplacent au rechagement de la page.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">graph_config</span><span class="kw">:</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="at">  </span><span class="fu">background_color</span><span class="kw">:</span><span class="at"> white</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="at">  </span><span class="fu">highlight_color</span><span class="kw">:</span><span class="at"> red</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="at">  </span><span class="fu">text_size</span><span class="kw">:</span><span class="at"> </span><span class="dv">7</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="at">  </span><span class="fu">position</span><span class="kw">:</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="at">    </span><span class="fu">x</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.5</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="at">    </span><span class="fu">y</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.5</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="at">  </span><span class="fu">attraction</span><span class="kw">:</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="at">    </span><span class="fu">force</span><span class="kw">:</span><span class="at"> </span><span class="dv">-150</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="at">    </span><span class="fu">distance_max</span><span class="kw">:</span><span class="at"> </span><span class="dv">300</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="at">    </span><span class="fu">verticale</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.02</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="at">    </span><span class="fu">verticale</span><span class="kw">:</span><span class="at"> </span><span class="dv">0</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="at">  </span><span class="fu">arrows</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
<p>Nous vous conseillions de faire vos tests directement dans l’interface de Cosma avant de reporter les valeurs dans le fichier de configuration.</p>
<dl>
<dt><code>background_color</code> Couleur de fond du graphe.</dt>
<dd>Exemple : <code>whitesmoke</code> ,<code>#ccc</code>, <code>rgb(57, 57, 57)</code>
</dd>
<dt><code>highlight_color</code> Couleur de surbrillance des éléments du graphe selectionnés.</dt>
<dd>Exemple : <code>red</code> ,<code>#0642ff</code>, <code>rgb(207, 52, 118)</code>
</dd>
<dt><code>text_size</code> règle la taille des titres des nœuds</dt>
<dd>Valeur en pixels uniquement
</dd>
</dl>
<p><code>position</code> Position horizontale (<code>x</code>) et verticale (<code>y</code>).</p>
<dl>
<dt><code>attraction</code> Attraction des nœuds</dt>
<dd><code>force</code> : Puissance globale. Plus elle est faible, plus les liens entre les nœuds sont relâchés. Monter au delà de <code>-50</code> provoquera des collisions incessantes.
</dd>
<dd><code>distance_max</code> : Distance maximum entre les nœuds en vue de contenir leur relâchement dans une zone.
</dd>
<dd><code>verticale</code> : Compression de l’espace sur l’axe vertical.
</dd>
<dd><code>horizontale</code> : Compression de l’espace sur l’axe horizontal.
</dd>
<dt><code>arrow</code> Affichage des flèches pour orienter le graphe.</dt>
<dd>Valeur : <code>true</code> ou <code>false</code>
</dd>
</dl>
<h2 data-number="4.2" id="parametres-facultatifs"><span class="header-section-number">4.2</span> Paramètres facultatifs</h2>
<p>Vous pouvez ajouter au fichier de configuration les paramètres suivants :</p>
<dl>
<dt><code>minify</code></dt>
<dd>Désactivé par défaut. Permet de réduire le poids du fichier cosmoscope exporté.
</dd>
<dd>Valeur : <code>true</code> ou <code>false</code>
</dd>
<dt><code>custom_css</code></dt>
<dd>Désactivé par défaut. Permet d’importer les styles d’un fichier CSS personnalisé. Ce fichier <code>custom.css</code> doit être placé dans le répertoire <code>/template/</code>.
</dd>
<dd>Valeur : <code>true</code> ou <code>false</code>
</dd>
<dt><code>metas</code></dt>
<dd>Vide par défaut. Permet d’ajouter des métadonnées arbitraires dans l’entête du Cosmoscope.
</dd>
<dd><p>Exemple</p>
<pre><code>metas:
  author: Niklas Luhmann
  keywords:
    - Zettelkasten
    - graphe documentaire
  description: Répertoire de fiches en ligne
  url: https://domaine.fr/cosmoscope.html</code></pre>
</dd>
<dt><code>focus_max</code></dt>
<dd>Valeur maximale du focus.
</dd>
<dd>Valeur : de 0 à ∞
</dd>
<dt><code>views</code></dt>
<dd>Liste des vues apparaissant dans la section “Vues” du cosmoscope.
</dd>
<dd>La chaîne suivant le nom de la vue doit être générée par le cosmoscope (bouton “Sauvegarder la vue actuelle”) pour indiquer les instrutions à reproduire (fitres actifs, focus, fiche à afficher).
</dd>
<dd><p>Exemple</p>
<pre><code>views:
  les graphes: eyJyZWNvcmRJZCI6MjAyMTAyMjExNDQ0NTF9
  sujet 2: eyJyZWNvcmRJZCI6MjAyMDA5MzAyMTQ0MDAsImlzb2xhdGVJZCI6IjIwMjAwOTMwMjE0NDAwLTEifQ%3D%3D</code></pre>
</dd>
</dl>
<h2 data-number="4.3" id="exemples-de-configuration"><span class="header-section-number">4.3</span> Exemples de configuration</h2>
<p>La configuration suivante permet de concentrer la visualisation sur le type des relations entre les nœuds. Les relations <code>undefined</code> sont poitillées tandis que les autres sont plus lisibles. Nous vous proposons ci-dessous un typologie de relations type <strong>thesaurus</strong> avec des relations spécifique (<code>s</code>), génériques (<code>g</code>) et associées (<code>a</code>).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">link_types</span><span class="kw">:</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="at">  </span><span class="fu">undefined</span><span class="kw">:</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="at">    </span><span class="fu">stroke</span><span class="kw">:</span><span class="at"> dotted</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="at">    </span><span class="fu">color</span><span class="kw">:</span><span class="at"> grey</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="at">  </span><span class="fu">s</span><span class="kw">:</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="at">    </span><span class="fu">stroke</span><span class="kw">:</span><span class="at"> dash</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="at">    </span><span class="fu">color</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;rgba(157, 62, 12, 0.7)&#39;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="at">  </span><span class="fu">g</span><span class="kw">:</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="at">    </span><span class="fu">stroke</span><span class="kw">:</span><span class="at"> double</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="at">    </span><span class="fu">color</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;rgba(157, 62, 12, 0.7)&#39;</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="at">  </span><span class="fu">a</span><span class="kw">:</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="at">    </span><span class="fu">stroke</span><span class="kw">:</span><span class="at"> simple</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="at">    </span><span class="fu">color</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;rgba(157, 62, 12, 0.7)&#39;</span></span></code></pre></div>
<h2 data-number="4.4" id="commandes"><span class="header-section-number">4.4</span> Commandes</h2>
<p>Les commandes suivantes vous permettent de modifier rapidement la configuration.</p>
<p>Modifier le chemin vers les fichiers sources :</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="ex">node</span> app import <span class="op">&lt;</span>chemin<span class="op">&gt;</span></span></code></pre></div>
<p>Modifier le chemin d’export du cosmoscope :</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="ex">node</span> app export <span class="op">&lt;</span>chemin<span class="op">&gt;</span></span></code></pre></div>
<p>Ajouter des types valides :</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="ex">node</span> app atype <span class="op">&lt;</span>nom<span class="op">&gt;</span> <span class="op">&lt;</span>couleur<span class="op">&gt;</span></span></code></pre></div>
<p>Créer le fichier de style personnalisé <code>custom.css</code> au répertoire <code>/template/</code> :</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="ex">node</span> app css</span></code></pre></div>
<p>Ajouter des vues :</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1"></a><span class="ex">node</span> app aview <span class="op">&lt;</span>nom<span class="op">&gt;</span> <span class="op">&lt;</span>code<span class="op">&gt;</span></span></code></pre></div>
<h1 data-number="5" id="utilisation-du-cosmographe"><span class="header-section-number">5</span> Utilisation du cosmographe</h1>
<h2 data-number="5.1" id="creer-des-fiches"><span class="header-section-number">5.1</span> Créer des fiches</h2>
<p>Pour créer une nouvelle fiche (une fois l’<a href="#">installation</a> et la <a href="#">configuration</a> effectuées) vous pouvez entrer l’une des deux commandes suivantes. Vous pouvez également créer un fichier Markdown par d’autres moyens, tant que vous respecter le modèle de fichier présenté plus bas.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1"></a><span class="ex">node</span> app record</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="ex">node</span> app autorecord <span class="op">&lt;</span>titre<span class="op">&gt;</span> <span class="op">&lt;</span>type<span class="op">&gt;</span> <span class="op">&lt;</span>mots-clés<span class="op">&gt;</span></span></code></pre></div>
<p><code>&lt;type&gt;</code> doit correspondre à l’un des types définis dans la configuration. <code>&lt;mots-clés&gt;</code> est une liste de mots-clés séparés par des virgules (sans espaces).</p>
<p>Ces commandes génèrent un fichier mardkdown (<code>.md</code>) avec le contenu suivant. En entête le YAML Front Matter (entre les deux <code>---</code>) contenant le title (<code>title</code>) de la fiche, son identifiant unique (<code>id</code>), son type (<code>type</code>) et ses mots-clés (<code>tags</code>). Après l’entête, vous pouvez librement inscrire votre contenu :</p>
<pre><code>---
title: Titre du document
id: 20201209111625
type: undefined
tags:
  - tag 1
  - tag 2
---

</code></pre>
<p>Ces différents champs sont libres, vous pouvez y renseigner ce que vous voulez et même ajouter des champs qui ne sont pas de cette liste. Par exemple un champ <code>description</code>. Les champs <code>type</code> et <code>tags</code> ne sont pas obligatoires. Une fiche ne peut être assignée qu’à un seul type, mais peut disposer d’autant de tags que vous souhaitez. Attention à bien entrer une série de chiffres unique comme l’identifiant. Par défaut, Cosma génère des identifiants à 14 chiffres par horodatage (année, mois, jour, heure, minute et seconde) sur le modèle de certains logiciels de prise de notes type Zettelkasten comme <a href="https://zettelkasten.de/the-archive/">The Archive</a> ou <a href="https://www.zettlr.com">Zettlr</a>. Si le champ <code>type</code> n’est pas spécifié ou bien que sa valeur ne correspond à l’un des type enregistré dans la configuration sous la paramètre <code>record_types</code>, la valeur de la fiche sera <code>undefined</code>.</p>
<h2 data-number="5.2" id="creer-des-liens"><span class="header-section-number">5.2</span> Créer des liens</h2>
<p>À l’intérieur des fiches, vous pouvez créer des liens avec l’identifiant de la fiche cible entre double crochets (ex : <code>[[20201209111625]]</code>). Vous pouvez également donner un type à ce lien selon la typologie dressée dans la configuration. Pour cela vous devez inscrire le nom du type dans le lien tel que <code>[[type:20201209111625]]</code>.</p>
<h2 data-number="5.3" id="export"><span class="header-section-number">5.3</span> Export</h2>
<p>Générer un cosmoscope avec l’une de ces commandes :</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1"></a><span class="ex">node</span> app modelize</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="ex">node</span> app</span></code></pre></div>
<p>Le fichier <code>cosmoscope.html</code> est exporté dans le répertoire défini dans la configuration. Il écrasera un fichier éponyme au même emplacement. Ce fichier est également copié dans le répertoire <code>/history</code>, dans un sous-répertoire portant la date du jour et avec les données modélisées au format JSON.</p>
<h2 data-number="5.4" id="historique"><span class="header-section-number">5.4</span> Historique</h2>
<p>Chaque fois que vous exportez un cosmoscope, il est sauvegardé dans un répertoire <code>history</code> à la racine de l’arborescence de Cosma. Ce répertoire contient un sous-répertoire pour chaque export effectué. Ils contiennent</p>
<ul>
<li>une copie du <code>cosmoscope.html</code></li>
<li>un registre <code>error.log</code> des alertes enregistrées durant la prodécure</li>
<li>un répertoire <code>data</code> contenant les fichiers
<ul>
<li><code>links.json</code> : liste des liens et de leurs métadonnées</li>
<li><code>nodes.json</code> : liste des nœuds et de leurs métadonnées</li>
</ul></li>
</ul>
<p>Vous pouvez réutiliser ces fichiers pour les intégrer à d’autres logiciels de visualisation.</p>
<h1 data-number="6" id="utilisation-du-cosmoscope"><span class="header-section-number">6</span> Utilisation du cosmoscope</h1>
<h2 data-number="6.1" id="interface"><span class="header-section-number">6.1</span> Interface</h2>
<p>L’interface de Cosma est composée en trois colonnes :</p>
<ul>
<li><strong>“<em>Menu</em>” latéral gauche</strong> : il concentre tous les menus permettant d’agir sur l’affichage du graphe de manière <em>globale</em>.</li>
<li><strong>“<em>Graphe</em>”</strong> : espace où s’étendent les nœuds et où l’utilisateur peut zoomer, se déplacer latéralement.</li>
<li><strong>“<em>Fiche</em>” latérale droite</strong> : lecture des métadonnées, du contenu des fiches et outils de navigation graphiques <em>particuliers</em>.</li>
</ul>
<p><img src="https://i.imgur.com/FZiYK5Y.jpg" /></p>
<!-- Description générale, portabilité -->
<p>L’affichage n’est pas adapté pour les petits écrans, comme pour les mobiles et petites tablettes. La manipulation au doigt ne vous permet pas de profiter de certaines interactions comme l’affichage du réseau au survol.</p>
<h3 data-number="6.1.1" id="css-personnalise"><span class="header-section-number">6.1.1</span> CSS personnalisé</h3>
<p>Vous pouvez via la commande suivante créer un fichier de style. Il peut être désactivé dans la configuration sans que n’ayez besoin de le supprimer. Les règles que vous inscrirez dans ce fichier viendront remplacer les styles implémentés dans le cosmoscope, inscrites dans le fichier <code>/template/styles.css</code> et <code>/template/print.css</code> pour les styles à l’impression. Vous pouvez ainsi remplacer les variables pour modifier les couleurs, les typographies utilisées (elles doivent être installées sur votre ordinateur pour que vous puissiez les lire) ou réécrire les règles attachées aux selecteurs utilisés.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1"></a><span class="ex">node</span> app css</span></code></pre></div>
<p>Vous pouvez vous baser sur le fichier <code>/template/template.njk</code> ou l’insepcteur de votre navigateur web pour repérer les parties de l’interface que vous souhaitez modifier.</p>
<h2 data-number="6.2" id="menu-lateral-gauche"><span class="header-section-number">6.2</span> Menu latéral gauche</h2>
<h3 data-number="6.2.1" id="moteur-de-recherche"><span class="header-section-number">6.2.1</span> Moteur de recherche</h3>
<p>C’est un champ de texte situé en haut du menu latéral gauche. Il vous suggère une liste de fiches dont le titre proche de votre saisie. Cette liste est établie en fonction des filtres et du focus actifs.</p>
<p>Cliquer sur une suggestion sélectionne le nœud correspondant dans le graphe et ouvre la fiche correspondante.</p>
<h3 data-number="6.2.2" id="filtres"><span class="header-section-number">6.2.2</span> Filtres</h3>
<p>C’est la liste des types de fiche, située en haut du menu latéral gauche. Pour qu’un filtre apparaisse dans le menu, il doit être enregistré dans votre configuration, mais aussi être le type désigné d’au moins une fiche. À la droite de chaque filtre, vous retrouvez le nombre de fiches qu’il affecte.</p>
<p>Cliquer sur un filtre permet de masquer ou de réafficher les fiches du type correspondant dans le graphe, l’index et les suggestions du moteur de recherche.</p>
<h3 data-number="6.2.3" id="mots-cles"><span class="header-section-number">6.2.3</span> Mots-clés</h3>
<p>Cette liste dépend de tous les éléments que vous avez saisi dans les champs <code>tags</code> de vos fichiers. Elle est située dans le menu latéral gauche. Le nombre de fiches liées est affiché au droite du mot-clé. Séléctionner un mot-clé met en surbrillance dans le graphe l’étiquette de toutes les fiches liées. Les entrées de l’index sont également triées pour être limitées à cette liste de fichées liées. Vous pouvez activer simultanément plusieurs mots-clés. Pour désactiver un mot-clé, cliquez à nouveau sur le bouton pour que sa bordure noire disparaisse.</p>
<h3 data-number="6.2.4" id="index"><span class="header-section-number">6.2.4</span> Index</h3>
<p>Il s’agit de la liste de toutes les fiches sous forme d’un menu déroulant. Il est située dans le menu latéral gauche. Un badge à droite indique le nombre de fiche actuellement affichées dans l’index. Un bouton vous permet de trier l’affichage dans l’ordre alphabétique (de manière croissante ou décroissante). Cliquer sur un titre sélectionne le nœud correspondant dans le graphe et ouvre la fiche correspondante.</p>
<p>L’index s’actualise avec l’affichage du graphe : les filtres, les mots-clés et le focus limitent le nombre d’entrées apparaissant dans l’index.</p>
<h3 data-number="6.2.5" id="vues"><span class="header-section-number">6.2.5</span> Vues</h3>
<p>À tout moment, l’état du graphe (fiche sélectionnée, filtres actifs, mode focus) peut être sauvegardé pour une restitution rapide et partageable. Cliquer sur le bouton « Sauvegarder la vue » insère un code dans le presse-papier de l’utilisateur. Ce code (en base 64) doit être ajouté à la suite d’un titre dédié dans le fichier de configuration, dans l’option <code>views</code>. Un bouton portant ce titre permet d’appliquer les paramètres activés à l’enregistrement et ainsi de retrouver les mêmes conditions de lecture. Pour désactiver une vue, cliquez à nouveau sur le bouton pour que sa bordure noire disparaisse.</p>
<p>Exemple :</p>
<pre><code>views:
  Une vue intéressante: eyJwb3MiOnsieCI6MCwieSI6MCwiem9vbSI6MX19</code></pre>
<h3 data-number="6.2.6" id="parametres-du-graphe-1"><span class="header-section-number">6.2.6</span> Paramètres du graphe</h3>
<p>C’est la liste des différents outils de configuration visuelle du graphe. Il s’agit de définir différents paramètres dont les valeurs par défaut peuvent être modifiées dans le fichier de configuration (pour retrouver à chaque export la même configuration visuelle).</p>
<ul>
<li>l’affichage dans le graphe
<ul>
<li>des liens (avec une indication sur le nombre total des liens)</li>
<li>des étiquettes</li>
</ul></li>
<li>l’animation des nœuds au survol</li>
<li>les différentes forces simulées par l’algorithme de dessin du graphe,</li>
<li>la position du graphe dans l’espace de la page,</li>
<li>la taille du titre des nœuds.</li>
</ul>
<h2 data-number="6.3" id="graphe"><span class="header-section-number">6.3</span> Graphe</h2>
<p>Le graphe est l’ensemble de nœuds interreliés. Les nœuds correspondent aux fiches et leurs liaisons aux liens qu’elles intègrent. En dessous de chaque nœud se trouve l’étiquette, le titre de la fiche à laquelle est lié le nœud.</p>
<p>Survoler un nœud le met temporairement en surbrillance, ainsi que ses connexions.</p>
<p>Cliquer sur un nœud le met en surbrillance, ainsi que ses connexions, et ouvre la fiche correspondante. Pour retirer la subrillance, il faut fermer la fiche, via le bouton « Fermer » en haut de la fiche.</p>
<p>Avec un clic maintenu sur un nœud, vous pouvez le déplacer et ainsi <em>tirer</em> l’ensemble de son réseau.</p>
<h3 data-number="6.3.1" id="navigation"><span class="header-section-number">6.3.1</span> Navigation</h3>
<p>Vous pouvez zoomer dans le graphe grâce à la molette de votre souris, en double cliquant sur le fond blanc ou bien avec le boutons dédiés, situés en bas à gauche du graphe. Au même endroit, le bouton <em>Recentrer</em> (raccourcis : touche R) vous permet de retrouver votre point de vue original.</p>
<!-- À compléter. Zoom etc. -->
<h3 data-number="6.3.2" id="spacialisation"><span class="header-section-number">6.3.2</span> Spacialisation</h3>
<p>La gestion des nœuds dans l’espace peut être paramétré dans le fichier de configuration, mais peut aussi être actualisé en direct avec les paramètres disponibles dans le menu “Paramètres du graphe”.</p>
<p>Cliquer sur le <em>Temoin de spacialisation</em> ou sur le barre Esapce vous permet de relancer l’algorithme pour un réseau bien espacé.</p>
<h3 data-number="6.3.3" id="focus"><span class="header-section-number">6.3.3</span> Focus</h3>
<p>En dessous des commandes de zoom se trouve une case à cocher « Activer le focus ». Elle ne fonctionne que si vous avez une fiche ouverte. Le réseau éloigné du nœud lié à cette fiche va alors disparaître pour ne laisser voir que ses connexions immédiates (liens et rétroliens). Vous pouvez avec la manette étendre cette zone d’affichage (focus) aux connexions situées à plusieurs liens de distance jusqu’au maximum permis par le paramètre <code>focus_max</code> du fichier de configuration.</p>
<h2 data-number="6.4" id="fiches"><span class="header-section-number">6.4</span> Fiches</h2>
<p>Les fiches sont présentées dans un volet latéral qui permet de consulter leur contenu et leur réseau.</p>
<p>Vous pouvez ouvrir une fiche en cliquant sur le nœud dédié, l’entrée de l’index ou bien via un lien interne. Ouvrir la fiche</p>
<ul>
<li>affiche son contenu dans le volet,</li>
<li>enregistrer son identifiant dans l’adresse de la page (permettant de la retrouver dans l’historique du navigateur, de partager l’adresse en ligne ou encore de la mettre de côté en dupliquant l’onglet).</li>
</ul>
<p>Cliquer sur le bouton « Fermer » referme le volet et désélectionne le nœud correspondant dans le graphe, sans changer l’adresse de la page.</p>
<h3 data-number="6.4.1" id="liens"><span class="header-section-number">6.4.1</span> Liens</h3>
<p>Les liens que vous avez intégré à votre fichier texte apparaissent bleus, entre les mêmes crochets et soulignés. Vous pouvez ouvrir ces liens dans un nouvel onglet via un clic droit. Si vous survolez un lien quelques secondes, vous pouvez lire le titre de la fiche vers laquelle il pointe.</p>
<p>Au bas de la fiche se trouve une liste des fiches vers lesquelles elle renvoie (liens sortants, d’après les liens bleu inscrits au-dessus) et des fiches qui pointent vers elle (liens entrants ou rétroliens). Survoler ces liens vous permet de lire le paragraphe où ils sont intégrés depuis leur fiche respective.</p>
<h1 data-number="7" id="credits"><span class="header-section-number">7</span> Crédits</h1>
<h2 data-number="7.1" id="equipe"><span class="header-section-number">7.1</span> Équipe</h2>
<ul>
<li><a href="https://www.arthurperret.fr/">Arthur Perret</a> (chef de projet)</li>
<li><a href="https://myllaume.fr/">Guillaume Brioudes</a> (développeur)</li>
<li><a href="http://www.guidedesegares.info/">Olivier Le Deuff</a> (chercheur)</li>
<li><a href="https://mica.u-bordeaux-montaigne.fr/borel-clement/">Clément Borel</a> (chercheur)</li>
</ul>
<h2 data-number="7.2" id="bibliotheques-utilisees"><span class="header-section-number">7.2</span> Bibliothèques utilisées</h2>
<p>Pour améliorer la maintenabilité et la lisibilité du code source, l’équipe de développement a recouru aux bibliothèques suivantes.</p>
<ul>
<li><a href="https://d3js.org/">D3</a> v4.13.0 (BSD 3-Clause) : Génération du graphe</li>
<li><a href="https://mozilla.github.io/nunjucks/">Nunjucks</a> v3.2.3 (BSD 2-Clause) : Génération du template du Cosmoscope</li>
<li><a href="https://github.com/nodeca/js-yaml">Js-yaml</a> v3.14.0 (MIT License) : Lecture du fichier de configuration et écriture des YAML Front Matter</li>
<li><a href="https://github.com/dworthen/js-yaml-front-matter">Js-yaml-front-matter</a> v4.1.0 (MIT License) : Lecture des YAML Front Matter des fichiers Markdown</li>
<li><a href="https://github.com/markdown-it/markdown-it">Markdown-it</a> v12.0.2 (MIT License) : Conversion Markdown → HTML</li>
<li><a href="https://www.npmjs.com/package/markdown-it-attrs">Markdown-it-attrs</a> v4.0.0 (MIT License) : Traitement des hyperliens Markdown au sein des fiches</li>
<li><a href="https://github.com/wilsonzlin/minify-html">Minify-html</a> v0.4.3 (MIT License) : Allègement du Cosmoscope</li>
<li><a href="https://fusejs.io/">Fuse-js</a> v6.4.6 (Apache License 2.0) : Moteur de recherche</li>
<li><a href="https://momentjs.com/">Moment</a> v2.29.1 (MIT License) : Gestion de l’horodatage</li>
</ul>
<h2 data-number="7.3" id="historique-du-projet"><span class="header-section-number">7.3</span> Historique du projet</h2>
<dl>
<dt>Août 2020</dt>
<dd>Expérimentation du “Lexicographe” dans l’interface de l’<a href="https://github.com/hyperotlet/otletosphere">Otletosphère</a> avec les données d’un premier scanner de fichiers Mardown.
</dd>
<dt>Décembre 2020</dt>
<dd>Début du développement de Cosma avec un nouveau cahier des charges.
</dd>
<dt>Avril 2021</dt>
<dd>Finalisation de la première version de Cosma.
</dd>
</dl>
</article>
</main>



</body>

</html>