<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR" xml:lang="fr-FR" >

<head>
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="description" content="Documentation du code de Cosma pour faciliter sa réutilisation" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<meta name="author" content="Guillaume Brioudes https://myllaume.fr/" />
<meta name="author" content="Arthur Perret https://www.arthurperret.fr/" />
<meta name="dcterms.date" content="2021-05-03" />
<title>Documentation de code de Cosma</title>

<link rel="stylesheet" href="style.css" />

</head>

<body>


<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#architecture-de-cosma"><span class="toc-section-number">1</span> Architecture de Cosma</a>
<ul>
<li><a href="#arborescence"><span class="toc-section-number">1.1</span> Arborescence</a></li>
</ul></li>
<li><a href="#le-cosmoscope"><span class="toc-section-number">2</span> Le cosmoscope</a>
<ul>
<li><a href="#generation-des-donnees"><span class="toc-section-number">2.1</span> Génération des données</a></li>
</ul></li>
</ul>
</nav>

<main>
<article>
<h1 class="title">Documentation de code de Cosma</h1>
<p>Nous vous recommandons vivement de lire le manuel d’utilisation pour bien saisir l’ensemble des usages en jeu dans le code source qui va vous être présenté ci-dessous.</p>
<p>Cette documentation s’adresse à des développeurs expérimentés en JavaScript. Elle vous présente l’arborescence et les concepts surlesquels reposent les <em>deux parties</em> formant Cosma, le cosmographe et le cosmoscope.</p>
<h1 data-number="1" id="architecture-de-cosma"><span class="header-section-number">1</span> Architecture de Cosma</h1>
<p>Cosma est principalement implémenté en JavaScript. Le logiciel repose sur deux systèmes distincts :</p>
<ul>
<li>Le <strong>cosmographe</strong> : il repose sur l’environnement NodeJs. Une série de scripts permettent de
<ul>
<li>vérifier et actualiser le fichier de configuration</li>
<li>générer des fichiers Markdown et leur entête</li>
<li>scanner un répertoire pour en extraire les fichiers Markdown et analyser leur contenu (Markdown, métadonnées YAML et liens <em>wiki</em>) pour générer
<ul>
<li>des fichiers JSON</li>
<li>le cosmoscope (ses données et variables CSS)</li>
</ul></li>
</ul></li>
<li>Le <strong>cosmoscope</strong> : il s’agit d’un fichier <code>.html</code> exécuté sur navigateurs web qu’un template <a href="https://mozilla.github.io/nunjucks/">Nunjucks</a> (<code>template.njk</code>) permet de générer. Il intègre
<ul>
<li>les métadonnées web et styles issues de la configuration</li>
<li>les scripts et bibliothèques JavaScript</li>
<li>des index (mots-clés, titre de fiche, vues)</li>
<li>les fiches</li>
</ul></li>
</ul>
<p>Les pages présentées ci-dessous vous présentent la liste exhaustive des fonctions au sein du code source de Cosma. Vous pouvez à votre tour les modifier, les appeller.</p>
<ul>
<li><a href="./api/cosmographe/index.html">API du Cosmographe</a></li>
<li><a href="./api/cosmoscope/index.html">API du Cosmoscope</a></li>
</ul>
<h2 data-number="1.1" id="arborescence"><span class="header-section-number">1.1</span> Arborescence</h2>
<p>Vous trouverez ci-dessous une description complète de l’arborescence du logiciel. Vous pourrez ainsi distinguer les fichiers concernant le cosmographe et ceux du cosmoscope.</p>
<pre><code>.
├── docs/                   | répertoire de la documentation
│   ├── api/                | répertoire des index des API
│   │   └── [x].md          | introduction à l&#39;index [x] de l&#39;API
│   └── api-config-[x].json | config. de l&#39;index [x] de l&#39;API
├── functions/              | fonctions du COSMOGRAPHE
│   ├── autorecord.js       | création de fichiers Markdown formatés
│   ├── history.js          | création répertoires de l&#39;historique des exports
│   ├── links.js            | analyse des liens wiki et de leurs attributs
│   ├── log.js              | affichage des alertes et création des registres
│   ├── modelize.js         | analyse des fichiers Markdown et création modèle de données
│   ├── record.js           | formulaire du terminal pour création des fichiers Md
│   ├── template.js         | intégration données, style et corps du COSMOSCOPE
│   └── verifconfig.js      | validation et modification de la configuration
├── template/               | 
│   ├── libs                | bibliothèques JavaScript
│   ├── scripts/            | fonctions du COSMOSCOPE
│   │   ├── filter.js       | appliquer filtres et focus
│   │   ├── graph.js        | génération du graphe selon données et configuration
│   │   ├── index.js        | contrôle des volets et boutons du menu gauche
│   │   ├── main.js         | historique de navigation et les variables globales
│   │   ├── nodes.js        | affichage et subrillance des nœuds
│   │   ├── record.js       | ouvrir/fermer le volet latéral droit
│   │   ├── search.js       | paramétrage moteur de recherche
│   │   ├── view.js         | enregistrer et appliquer une vue
│   │   └── zoom.js         | paramétrer les déplacement (latéral, zoom) au sein du graphe
│   ├── cosmalogo.svg       | logo du logiciel
│   ├── template.njk        | structure du COSMOSCOPE
│   └── styles.css          | styles du COSMOSCOPE
├── app.js                  | adressage des commandes au terminal
└── package.json            | liste des dépendances NodeJs</code></pre>
<h1 data-number="2" id="le-cosmoscope"><span class="header-section-number">2</span> Le cosmoscope</h1>
<h2 data-number="2.1" id="generation-des-donnees"><span class="header-section-number">2.1</span> Génération des données</h2>
<p>Il est généré en trois temps, par trois fonctions implémentées dans le fichier <code>/functions/template.js</code>. Elles sont appelées au sein du fichier <code>/functions/modelize.js</code> d’où proviennent les intrants (données passées en paramètre).</p>
<ol type="1">
<li>La fonction <a href="https://hyperotlet.github.io/cosma/api/cosmographe/global.html#jsonData"><code>jsonData()</code></a> pour créer le fichier <code>/template/graph-data.js</code> contenant les données de modélisation du graphe, sa configuration et l’index des fiches.</li>
<li>La fonction <a href="https://hyperotlet.github.io/cosma/api/cosmographe/global.html#colors"><code>colors</code></a> pour créer le fichier <code>/template/colors.css</code> contenant les <a href="https://developer.mozilla.org/fr/docs/Web/CSS/Using_CSS_custom_properties">variables CSS</a> et les règles associées selon la configuration des couleurs préscrite dans le fichier <code>config.yml</code> extraites.</li>
<li>La fonction <a href="https://hyperotlet.github.io/cosma/api/cosmographe/global.html#cosmoscope"><code>cosmoscope</code></a> s’appuyant sur le fichier de construction <code>/template/template.njk</code> pour intégrer l’ensemble des données des deux premiers fichiers créés (il inclut <code>colors.css</code> et <code>graph-data.js</code>) ainsi que des fichiers analysés.</li>
</ol>
<p>Les données intégrées avec le fichier <code>graph-data.js</code> sont déterminantes pour l’ensemble des opérations du cosmoscope. Elles permettent d’abord de générer le graphe en étant affectées dans le fichier <code>/template/scripts/graph.js</code>. Elles permettent ensuite de coordonner les filtres et focus sur les nœuds.</p>
</article>
</main>



</body>

</html>